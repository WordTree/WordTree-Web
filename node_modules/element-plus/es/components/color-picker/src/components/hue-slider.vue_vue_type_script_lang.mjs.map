{"version":3,"file":"hue-slider.vue_vue_type_script_lang.mjs","sources":["../../../../../../../packages/components/color-picker/src/components/hue-slider.vue"],"sourcesContent":["<template>\n  <div class=\"el-color-hue-slider\" :class=\"{ 'is-vertical': vertical }\">\n    <div ref=\"bar\" class=\"el-color-hue-slider__bar\" @click=\"handleClick\"></div>\n    <div\n      ref=\"thumb\"\n      class=\"el-color-hue-slider__thumb\"\n      :style=\"{\n        left: thumbLeft + 'px',\n        top: thumbTop + 'px',\n      }\"\n    ></div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport {\n  ref,\n  computed,\n  watch,\n  onMounted,\n  getCurrentInstance,\n  defineComponent,\n} from 'vue'\nimport { getClientXY } from '@element-plus/utils/dom'\nimport draggable from '../draggable'\n\nimport type { PropType } from 'vue'\nimport type Color from '../color'\n\nexport default defineComponent({\n  name: 'ElColorHueSlider',\n\n  props: {\n    color: {\n      type: Object as PropType<Color>,\n      required: true,\n    },\n\n    vertical: Boolean,\n  },\n  setup(props) {\n    const instance = getCurrentInstance()\n    // ref\n    const thumb = ref<HTMLElement | null>(null)\n    const bar = ref<HTMLElement | null>(null)\n    // data\n    const thumbLeft = ref(0)\n    const thumbTop = ref(0)\n    // computed\n    const hueValue = computed(() => {\n      return props.color.get('hue')\n    })\n    // watch\n    watch(\n      () => hueValue.value,\n      () => {\n        update()\n      }\n    )\n\n    // methods\n    function handleClick(event: Event) {\n      const target = event.target\n\n      if (target !== thumb.value) {\n        handleDrag(event)\n      }\n    }\n\n    function handleDrag(event) {\n      const el = instance.vnode.el as HTMLElement\n      const rect = el.getBoundingClientRect()\n      const { clientX, clientY } = getClientXY(event)\n      let hue\n\n      if (!props.vertical) {\n        let left = clientX - rect.left\n        left = Math.min(left, rect.width - thumb.value.offsetWidth / 2)\n        left = Math.max(thumb.value.offsetWidth / 2, left)\n\n        hue = Math.round(\n          ((left - thumb.value.offsetWidth / 2) /\n            (rect.width - thumb.value.offsetWidth)) *\n            360\n        )\n      } else {\n        let top = clientY - rect.top\n\n        top = Math.min(top, rect.height - thumb.value.offsetHeight / 2)\n        top = Math.max(thumb.value.offsetHeight / 2, top)\n        hue = Math.round(\n          ((top - thumb.value.offsetHeight / 2) /\n            (rect.height - thumb.value.offsetHeight)) *\n            360\n        )\n      }\n      props.color.set('hue', hue)\n    }\n\n    function getThumbLeft() {\n      const el = instance.vnode.el\n\n      if (props.vertical) return 0\n      const hue = props.color.get('hue')\n\n      if (!el) return 0\n      return Math.round(\n        (hue * (el.offsetWidth - thumb.value.offsetWidth / 2)) / 360\n      )\n    }\n\n    function getThumbTop() {\n      const el = instance.vnode.el as HTMLElement\n      if (!props.vertical) return 0\n      const hue = props.color.get('hue')\n\n      if (!el) return 0\n      return Math.round(\n        (hue * (el.offsetHeight - thumb.value.offsetHeight / 2)) / 360\n      )\n    }\n\n    function update() {\n      thumbLeft.value = getThumbLeft()\n      thumbTop.value = getThumbTop()\n    }\n\n    // mounded\n    onMounted(() => {\n      const dragConfig = {\n        drag: (event) => {\n          handleDrag(event)\n        },\n        end: (event) => {\n          handleDrag(event)\n        },\n      }\n\n      draggable(bar.value, dragConfig)\n      draggable(thumb.value, dragConfig)\n      update()\n    })\n\n    return {\n      bar,\n      thumb,\n      thumbLeft,\n      thumbTop,\n      hueValue,\n      handleClick,\n      update,\n    }\n  },\n})\n</script>\n"],"names":[],"mappings":";;;;AA6BA,aAAe,gBAAgB;AAAA,EAC7B,MAAM;AAAA,EAEN,OAAO;AAAA,IACL,OAAO;AAAA,MACL,MAAM;AAAA,MACN,UAAU;AAAA;AAAA,IAGZ,UAAU;AAAA;AAAA,EAEZ,MAAM,OAAO;AACX,UAAM,WAAW;AAEjB,UAAM,QAAQ,IAAwB;AACtC,UAAM,MAAM,IAAwB;AAEpC,UAAM,YAAY,IAAI;AACtB,UAAM,WAAW,IAAI;AAErB,UAAM,WAAW,SAAS,MAAM;AAC9B,aAAO,MAAM,MAAM,IAAI;AAAA;AAGzB,UACE,MAAM,SAAS,OACf,MAAM;AACJ;AAAA;AAKJ,yBAAqB,OAAc;AACjC,YAAM,SAAS,MAAM;AAErB,UAAI,WAAW,MAAM,OAAO;AAC1B,mBAAW;AAAA;AAAA;AAIf,wBAAoB,OAAO;AACzB,YAAM,KAAK,SAAS,MAAM;AAC1B,YAAM,OAAO,GAAG;AAChB,YAAM,EAAE,SAAS,YAAY,YAAY;AACzC,UAAI;AAEJ,UAAI,CAAC,MAAM,UAAU;AACnB,YAAI,OAAO,UAAU,KAAK;AAC1B,eAAO,KAAK,IAAI,MAAM,KAAK,QAAQ,MAAM,MAAM,cAAc;AAC7D,eAAO,KAAK,IAAI,MAAM,MAAM,cAAc,GAAG;AAE7C,cAAM,KAAK,MACP,QAAO,MAAM,MAAM,cAAc,WAC3B,QAAQ,MAAM,MAAM,eAC1B;AAAA,aAEC;AACL,YAAI,MAAM,UAAU,KAAK;AAEzB,cAAM,KAAK,IAAI,KAAK,KAAK,SAAS,MAAM,MAAM,eAAe;AAC7D,cAAM,KAAK,IAAI,MAAM,MAAM,eAAe,GAAG;AAC7C,cAAM,KAAK,MACP,OAAM,MAAM,MAAM,eAAe,WAC3B,SAAS,MAAM,MAAM,gBAC3B;AAAA;AAGN,YAAM,MAAM,IAAI,OAAO;AAAA;AAGzB,4BAAwB;AACtB,YAAM,KAAK,SAAS,MAAM;AAE1B,UAAI,MAAM;AAAU,eAAO;AAC3B,YAAM,MAAM,MAAM,MAAM,IAAI;AAE5B,UAAI,CAAC;AAAI,eAAO;AAChB,aAAO,KAAK,MACT,UAAU,cAAc,MAAM,MAAM,cAAc,KAAM;AAAA;AAI7D,2BAAuB;AACrB,YAAM,KAAK,SAAS,MAAM;AAC1B,UAAI,CAAC,MAAM;AAAU,eAAO;AAC5B,YAAM,MAAM,MAAM,MAAM,IAAI;AAE5B,UAAI,CAAC;AAAI,eAAO;AAChB,aAAO,KAAK,MACT,UAAU,eAAe,MAAM,MAAM,eAAe,KAAM;AAAA;AAI/D,sBAAkB;AAChB,gBAAU,QAAQ;AAClB,eAAS,QAAQ;AAAA;AAInB,cAAU,MAAM;AACd,YAAM,aAAa;AAAA,QACjB,MAAM,CAAC,UAAU;AACf,qBAAW;AAAA;AAAA,QAEb,KAAK,CAAC,UAAU;AACd,qBAAW;AAAA;AAAA;AAIf,gBAAU,IAAI,OAAO;AACrB,gBAAU,MAAM,OAAO;AACvB;AAAA;AAGF,WAAO;AAAA,MACL;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA;AAAA;;;;"}