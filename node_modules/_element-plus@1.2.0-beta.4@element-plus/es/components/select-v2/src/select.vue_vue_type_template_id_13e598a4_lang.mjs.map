{"version":3,"file":"select.vue_vue_type_template_id_13e598a4_lang.mjs","sources":["../../../../../../packages/components/select-v2/src/select.vue?vue&type=template&id=13e598a4&lang.js"],"sourcesContent":["<template>\n  <div\n    ref=\"selectRef\"\n    v-click-outside:[popperRef]=\"handleClickOutside\"\n    :class=\"[selectSize ? 'el-select-v2--' + selectSize : '']\"\n    class=\"el-select-v2\"\n    @click.stop=\"toggleMenu\"\n    @mouseenter=\"states.comboBoxHovering = true\"\n    @mouseleave=\"states.comboBoxHovering = false\"\n  >\n    <el-popper\n      ref=\"popper\"\n      v-model:visible=\"dropdownMenuVisible\"\n      :append-to-body=\"popperAppendToBody\"\n      :popper-class=\"`el-select-v2__popper ${popperClass}`\"\n      :gpu-acceleration=\"false\"\n      :stop-popper-mouse-event=\"false\"\n      :popper-options=\"popperOptions\"\n      :fallback-placements=\"['bottom-start', 'top-start', 'right', 'left']\"\n      :effect=\"Effect.LIGHT\"\n      manual-mode\n      placement=\"bottom-start\"\n      pure\n      transition=\"el-zoom-in-top\"\n      trigger=\"click\"\n      @before-enter=\"handleMenuEnter\"\n      @after-leave=\"states.inputValue = states.displayInputValue\"\n    >\n      <template #trigger>\n        <div\n          ref=\"selectionRef\"\n          class=\"el-select-v2__wrapper\"\n          :class=\"{\n            'is-focused': states.isComposing,\n            'is-hovering': states.comboBoxHovering,\n            'is-filterable': filterable,\n            'is-disabled': disabled,\n          }\"\n        >\n          <div v-if=\"$slots.prefix\">\n            <slot name=\"prefix\"></slot>\n          </div>\n          <div v-if=\"multiple\" class=\"el-select-v2__selection\">\n            <template v-if=\"collapseTags && modelValue.length > 0\">\n              <div class=\"el-select-v2__selected-item\">\n                <el-tag\n                  :closable=\"\n                    !selectDisabled && !states.cachedOptions[0]?.disable\n                  \"\n                  :size=\"collapseTagSize\"\n                  type=\"info\"\n                  disable-transitions\n                  @close=\"deleteTag($event, states.cachedOptions[0])\"\n                >\n                  <span\n                    class=\"el-select-v2__tags-text\"\n                    :style=\"{\n                      maxWidth: `${tagMaxWidth}px`,\n                    }\"\n                    >{{ states.cachedOptions[0]?.label }}</span\n                  >\n                </el-tag>\n                <el-tag\n                  v-if=\"modelValue.length > 1\"\n                  :closable=\"false\"\n                  :size=\"collapseTagSize\"\n                  type=\"info\"\n                  disable-transitions\n                >\n                  <span\n                    class=\"el-select-v2__tags-text\"\n                    :style=\"{\n                      maxWidth: `${tagMaxWidth}px`,\n                    }\"\n                    >+ {{ modelValue.length - 1 }}</span\n                  >\n                </el-tag>\n              </div>\n            </template>\n\n            <template v-else>\n              <div\n                v-for=\"(selected, idx) in states.cachedOptions\"\n                :key=\"idx\"\n                class=\"el-select-v2__selected-item\"\n              >\n                <el-tag\n                  :key=\"getValueKey(selected)\"\n                  :closable=\"!selectDisabled && !selected.disabled\"\n                  :size=\"collapseTagSize\"\n                  type=\"info\"\n                  disable-transitions\n                  @close=\"deleteTag($event, selected)\"\n                >\n                  <span\n                    class=\"el-select-v2__tags-text\"\n                    :style=\"{\n                      maxWidth: `${tagMaxWidth}px`,\n                    }\"\n                    >{{ getLabel(selected) }}</span\n                  >\n                </el-tag>\n              </div>\n            </template>\n            <div\n              class=\"el-select-v2__selected-item el-select-v2__input-wrapper\"\n              :style=\"inputWrapperStyle\"\n            >\n              <input\n                :id=\"id\"\n                ref=\"inputRef\"\n                v-model-text=\"states.displayInputValue\"\n                :autocomplete=\"autocomplete\"\n                aria-autocomplete=\"list\"\n                aria-haspopup=\"listbox\"\n                autocapitalize=\"off\"\n                :aria-expanded=\"expanded\"\n                :aria-labelledby=\"label\"\n                class=\"el-select-v2__combobox-input\"\n                :class=\"[selectSize ? `is-${selectSize}` : '']\"\n                :disabled=\"disabled\"\n                role=\"combobox\"\n                :readonly=\"!filterable\"\n                spellcheck=\"false\"\n                type=\"text\"\n                :name=\"name\"\n                :unselectable=\"expanded ? 'on' : undefined\"\n                @update:modelValue=\"onUpdateInputValue\"\n                @focus=\"handleFocus\"\n                @input=\"onInput\"\n                @compositionstart=\"handleCompositionStart\"\n                @compositionupdate=\"handleCompositionUpdate\"\n                @compositionend=\"handleCompositionEnd\"\n                @keydown.up.stop.prevent=\"onKeyboardNavigate('backward')\"\n                @keydown.down.stop.prevent=\"onKeyboardNavigate('forward')\"\n                @keydown.enter.stop.prevent=\"onKeyboardSelect\"\n                @keydown.esc.stop.prevent=\"handleEsc\"\n                @keydown.delete.stop=\"handleDel\"\n              />\n              <span\n                v-if=\"filterable\"\n                ref=\"calculatorRef\"\n                aria-hidden=\"true\"\n                class=\"el-select-v2__input-calculator\"\n                v-text=\"states.displayInputValue\"\n              >\n              </span>\n            </div>\n          </div>\n          <template v-else>\n            <div\n              class=\"el-select-v2__selected-item el-select-v2__input-wrapper\"\n            >\n              <input\n                :id=\"id\"\n                ref=\"inputRef\"\n                v-model-text=\"states.displayInputValue\"\n                aria-autocomplete=\"list\"\n                aria-haspopup=\"listbox\"\n                :aria-labelledby=\"label\"\n                :aria-expanded=\"expanded\"\n                autocapitalize=\"off\"\n                :autocomplete=\"autocomplete\"\n                class=\"el-select-v2__combobox-input\"\n                :disabled=\"disabled\"\n                :name=\"name\"\n                role=\"combobox\"\n                :readonly=\"!filterable\"\n                spellcheck=\"false\"\n                type=\"text\"\n                :unselectable=\"expanded ? 'on' : undefined\"\n                @compositionstart=\"handleCompositionStart\"\n                @compositionupdate=\"handleCompositionUpdate\"\n                @compositionend=\"handleCompositionEnd\"\n                @focus=\"handleFocus\"\n                @input=\"onInput\"\n                @keydown.up.stop.prevent=\"onKeyboardNavigate('backward')\"\n                @keydown.down.stop.prevent=\"onKeyboardNavigate('forward')\"\n                @keydown.enter.stop.prevent=\"onKeyboardSelect\"\n                @keydown.esc.stop.prevent=\"handleEsc\"\n                @update:modelValue=\"onUpdateInputValue\"\n              />\n            </div>\n            <span\n              v-if=\"filterable\"\n              ref=\"calculatorRef\"\n              aria-hidden=\"true\"\n              class=\"el-select-v2__selected-item el-select-v2__input-calculator\"\n              v-text=\"states.displayInputValue\"\n            >\n            </span>\n          </template>\n          <span\n            v-if=\"shouldShowPlaceholder\"\n            :class=\"{\n              'el-select-v2__placeholder': true,\n              'is-transparent':\n                states.isComposing ||\n                (placeholder && multiple\n                  ? modelValue.length === 0\n                  : !hasModelValue),\n            }\"\n          >\n            {{ currentPlaceholder }}\n          </span>\n          <span class=\"el-select-v2__suffix\">\n            <el-icon\n              v-if=\"iconComponent\"\n              v-show=\"!showClearBtn\"\n              :class=\"['el-select-v2__caret', 'el-input__icon', iconReverse]\"\n            >\n              <component :is=\"iconComponent\" />\n            </el-icon>\n            <el-icon\n              v-if=\"showClearBtn && clearIcon\"\n              class=\"el-select-v2__caret el-input__icon\"\n              @click.prevent.stop=\"handleClear\"\n            >\n              <component :is=\"clearIcon\" />\n            </el-icon>\n          </span>\n        </div>\n      </template>\n      <template #default>\n        <el-select-menu\n          ref=\"menuRef\"\n          :data=\"filteredOptions\"\n          :width=\"popperSize\"\n          :hovering-index=\"states.hoveringIndex\"\n          :scrollbar-always-on=\"scrollbarAlwaysOn\"\n        >\n          <template #default=\"scope\">\n            <slot v-bind=\"scope\"></slot>\n          </template>\n          <template #empty>\n            <slot name=\"empty\">\n              <p class=\"el-select-v2__empty\">\n                {{ emptyText ? emptyText : '' }}\n              </p>\n            </slot>\n          </template>\n        </el-select-menu>\n      </template>\n    </el-popper>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, provide, toRefs, reactive, vModelText } from 'vue'\nimport { ClickOutside } from '@element-plus/directives'\nimport ElPopper from '@element-plus/components/popper'\nimport ElTag from '@element-plus/components/tag'\nimport ElIcon from '@element-plus/components/icon'\nimport { UPDATE_MODEL_EVENT, CHANGE_EVENT } from '@element-plus/utils/constants'\nimport ElSelectMenu from './select-dropdown.vue'\nimport useSelect from './useSelect'\nimport { selectV2InjectionKey } from './token'\nimport { SelectProps } from './defaults'\nexport default defineComponent({\n  name: 'ElSelectV2',\n  components: {\n    ElSelectMenu,\n    ElTag,\n    ElPopper,\n    ElIcon,\n  },\n  directives: { ClickOutside, ModelText: vModelText },\n  props: SelectProps,\n  emits: [\n    UPDATE_MODEL_EVENT,\n    CHANGE_EVENT,\n    'remove-tag',\n    'clear',\n    'visible-change',\n    'focus',\n    'blur',\n  ],\n\n  setup(props, { emit }) {\n    const API = useSelect(props, emit)\n    // TODO, remove the any cast to align the actual API.\n    provide(selectV2InjectionKey, {\n      props: reactive({\n        ...toRefs(props),\n        height: API.popupHeight,\n      }),\n      onSelect: API.onSelect,\n      onHover: API.onHover,\n      onKeyboardNavigate: API.onKeyboardNavigate,\n      onKeyboardSelect: API.onKeyboardSelect,\n    } as any)\n\n    return API\n  },\n})\n</script>\n"],"names":["_createElementBlock","_createVNode","_createElementVNode","_renderSlot","_createBlock","_toDisplayString"],"mappings":"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"}