{"version":3,"file":"index.vue_vue_type_script_lang.js","sources":["../../../../../../packages/components/popper/src/index.vue"],"sourcesContent":["<script lang=\"ts\">\nimport {\n  defineComponent,\n  Fragment,\n  Teleport,\n  onBeforeUnmount,\n  onDeactivated,\n  onActivated,\n  onMounted,\n  renderSlot,\n  toDisplayString,\n  withDirectives,\n  h,\n} from 'vue'\nimport { ClickOutside } from '@element-plus/directives'\nimport { throwError } from '@element-plus/utils/error'\n\nimport usePopper from './use-popper/index'\nimport defaultProps from './use-popper/defaults'\nimport { renderPopper, renderTrigger, renderArrow } from './renderers'\n\nconst compName = 'ElPopper'\nconst UPDATE_VISIBLE_EVENT = 'update:visible'\n\nexport default defineComponent({\n  name: compName,\n  props: defaultProps,\n  emits: [\n    UPDATE_VISIBLE_EVENT,\n    'after-enter',\n    'after-leave',\n    'before-enter',\n    'before-leave',\n  ],\n  setup(props, ctx) {\n    if (!ctx.slots.trigger) {\n      throwError(compName, 'Trigger must be provided')\n    }\n    // this is a reference that we need to pass down to child component\n    // to obtain the child instance\n\n    // return usePopper(props as IPopperOptions, ctx as SetupContext)\n    const popperStates = usePopper(props, ctx)\n\n    const forceDestroy = () => popperStates.doDestroy(true)\n    onMounted(popperStates.initializePopper)\n    onBeforeUnmount(forceDestroy)\n    onActivated(popperStates.initializePopper)\n    onDeactivated(forceDestroy)\n\n    return popperStates\n  },\n\n  render() {\n    const {\n      $slots,\n      appendToBody,\n      class: kls,\n      style,\n      effect,\n      hide,\n      onPopperMouseEnter,\n      onPopperMouseLeave,\n      onAfterEnter,\n      onAfterLeave,\n      onBeforeEnter,\n      onBeforeLeave,\n      popperClass,\n      popperId,\n      popperStyle,\n      pure,\n      showArrow,\n      transition,\n      visibility,\n      stopPopperMouseEvent,\n    } = this\n\n    const isManual = this.isManualMode()\n    const arrow = renderArrow(showArrow)\n    const popper = renderPopper(\n      {\n        effect,\n        name: transition,\n        popperClass,\n        popperId,\n        popperStyle,\n        pure,\n        stopPopperMouseEvent,\n        onMouseenter: onPopperMouseEnter,\n        onMouseleave: onPopperMouseLeave,\n        onAfterEnter,\n        onAfterLeave,\n        onBeforeEnter,\n        onBeforeLeave,\n        visibility,\n      },\n      [\n        renderSlot($slots, 'default', {}, () => {\n          return [toDisplayString(this.content)]\n        }),\n        arrow,\n      ]\n    )\n\n    const _t = $slots.trigger?.()\n\n    const triggerProps = {\n      'aria-describedby': popperId,\n      class: kls,\n      style,\n      ref: 'triggerRef',\n      ...this.events,\n    }\n\n    const trigger = isManual\n      ? renderTrigger(_t, triggerProps)\n      : withDirectives(renderTrigger(_t, triggerProps), [[ClickOutside, hide]])\n\n    return h(Fragment, null, [\n      trigger,\n      h(\n        Teleport as any, // Vue did not support createVNode for Teleport\n        {\n          to: 'body',\n          disabled: !appendToBody,\n        },\n        [popper]\n      ),\n    ])\n  },\n})\n</script>\n"],"names":["defineComponent","defaultProps","usePopper","arrow","renderArrow","popper","renderPopper","renderSlot","toDisplayString","trigger","renderTrigger","withDirectives","ClickOutside","h","Fragment","Teleport"],"mappings":";;;;;;;;;;;;;;;AAqBA,MAAM,WAAW;AACjB,MAAM,uBAAuB;AAE7B,aAAeA,oBAAgB;AAAA,EAC7B,MAAM;AAAA,EACN,OAAOC;AAAA,EACP,OAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA;AAAA,EAEF,MAAM,OAAO,KAAK;AAChB,QAAI,CAAC,IAAI,MAAM,SAAS;AACtB,uBAAW,UAAU;AAAA;AAMvB,UAAM,eAAeC,iBAAU,OAAO;AAEtC,UAAM,eAAe,MAAM,aAAa,UAAU;AAClD,kBAAU,aAAa;AACvB,wBAAgB;AAChB,oBAAY,aAAa;AACzB,sBAAc;AAEd,WAAO;AAAA;AAAA,EAGT,SAAS;;AACP,UAAM;AAAA,MACJ;AAAA,MACA;AAAA,MACA,OAAO;AAAA,MACP;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,QACE;AAEJ,UAAM,WAAW,KAAK;AACtB,UAAMC,UAAQC,iBAAY;AAC1B,UAAMC,WAASC,kBACb;AAAA,MACE;AAAA,MACA,MAAM;AAAA,MACN;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA,cAAc;AAAA,MACd,cAAc;AAAA,MACd;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,OAEF;AAAA,MACEC,eAAW,QAAQ,WAAW,IAAI,MAAM;AACtC,eAAO,CAACC,oBAAgB,KAAK;AAAA;AAAA,MAE/BL;AAAA;AAIJ,UAAM,KAAK,aAAO,YAAP;AAEX,UAAM,eAAe;AAAA,MACnB,oBAAoB;AAAA,MACpB,OAAO;AAAA,MACP;AAAA,MACA,KAAK;AAAA,SACF,KAAK;AAAA;AAGV,UAAMM,YAAU,WACZC,mBAAc,IAAI,gBAClBC,mBAAeD,mBAAc,IAAI,eAAe,CAAC,CAACE,oBAAc;AAEpE,WAAOC,MAAEC,cAAU,MAAM;AAAA,MACvBL;AAAA,MACAI,MACEE,cACA;AAAA,QACE,IAAI;AAAA,QACJ,UAAU,CAAC;AAAA,SAEb,CAACV;AAAA;AAAA;AAAA;;;;"}